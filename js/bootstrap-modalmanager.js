!function(e){"use strict";var t=function(e,t){this.init(e,t)};t.prototype={constructor:t,init:function(t,n){if(this.$element=e(t),this.options=e.extend({},e.fn.modalmanager.defaults,this.$element.data(),"object"==typeof n&&n),this.stack=[],this.backdropCount=0,this.options.resize){var o,a=this;e(window).on("resize.modal",function(){o&&clearTimeout(o),o=setTimeout(function(){for(var e=0;e<a.stack.length;e++)a.stack[e].isShown&&a.stack[e].layout()},10)})}},createModal:function(t,n){e(t).modal(e.extend({manager:this},n))},appendModal:function(t){this.stack.push(t);var n=this;t.$element.on("show.modalmanager",s(function(o){var a=function(){t.isShown=!0;var o=e.support.transition&&t.$element.hasClass("fade");n.$element.toggleClass("modal-open",n.hasOpenModal()).toggleClass("page-overflow",e(window).height()<n.$element.height()),t.$parent=t.$element.parent(),t.$container=n.createContainer(t),t.$element.appendTo(t.$container),n.backdrop(t,function(){t.$element.show(),o&&t.$element[0].offsetWidth,t.layout(),t.$element.addClass("in").attr("aria-hidden",!1);var a=function(){n.setFocus(),t.$element.trigger("shown")};o?t.$element.one(e.support.transition.end,a):a()})};t.options.replace?n.replace(a):a()})),t.$element.on("hidden.modalmanager",s(function(o){if(n.backdrop(t),t.$element.parent().length)if(t.$backdrop){e.support.transition&&t.$element.hasClass("fade")&&t.$element[0].offsetWidth,e.support.transition&&t.$element.hasClass("fade")?t.$backdrop.one(e.support.transition.end,function(){t.destroy()}):t.destroy()}else t.destroy();else n.destroyModal(t)})),t.$element.on("destroyed.modalmanager",s(function(e){n.destroyModal(t)}))},getOpenModals:function(){for(var e=[],t=0;t<this.stack.length;t++)this.stack[t].isShown&&e.push(this.stack[t]);return e},hasOpenModal:function(){return this.getOpenModals().length>0},setFocus:function(){for(var e,t=0;t<this.stack.length;t++)this.stack[t].isShown&&(e=this.stack[t]);e&&e.focus()},destroyModal:function(e){e.$element.off(".modalmanager"),e.$backdrop&&this.removeBackdrop(e),this.stack.splice(this.getIndexOfModal(e),1);var t=this.hasOpenModal();this.$element.toggleClass("modal-open",t),t||this.$element.removeClass("page-overflow"),this.removeContainer(e),this.setFocus()},getModalAt:function(e){return this.stack[e]},getIndexOfModal:function(e){for(var t=0;t<this.stack.length;t++)if(e===this.stack[t])return t},replace:function(t){for(var n,o=0;o<this.stack.length;o++)this.stack[o].isShown&&(n=this.stack[o]);n?(this.$backdropHandle=n.$backdrop,n.$backdrop=null,t&&n.$element.one("hidden",s(e.proxy(t,this))),n.hide()):t&&t()},removeBackdrop:function(e){e.$backdrop.remove(),e.$backdrop=null},createBackdrop:function(t,n){var o;return this.$backdropHandle?((o=this.$backdropHandle).off(".modalmanager"),this.$backdropHandle=null,this.isLoading&&this.removeSpinner()):o=e(n).addClass(t).appendTo(this.$element),o},removeContainer:function(e){e.$container.remove(),e.$container=null},createContainer:function(t){var n;return n=e('<div class="modal-scrollable">').css("z-index",a("modal",this.getOpenModals().length)).appendTo(this.$element),t&&"static"!=t.options.backdrop?n.on("click.modal",s(function(e){t.hide()})):t&&n.on("click.modal",s(function(e){t.attention()})),n},backdrop:function(t,n){var o=t.$element.hasClass("fade")?"fade":"",s=t.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(t.isShown&&s){var i=e.support.transition&&o&&!this.$backdropHandle;t.$backdrop=this.createBackdrop(o,t.options.backdropTemplate),t.$backdrop.css("z-index",a("backdrop",this.getOpenModals().length)),i&&t.$backdrop[0].offsetWidth,t.$backdrop.addClass("in"),this.backdropCount+=1,i?t.$backdrop.one(e.support.transition.end,n):n()}else if(!t.isShown&&t.$backdrop){t.$backdrop.removeClass("in"),this.backdropCount-=1;var r=this;e.support.transition&&t.$element.hasClass("fade")?t.$backdrop.one(e.support.transition.end,function(){r.removeBackdrop(t)}):r.removeBackdrop(t)}else n&&n()},removeSpinner:function(){this.$spinner&&this.$spinner.remove(),this.$spinner=null,this.isLoading=!1},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove(),this.$backdropHandle=null,this.removeSpinner()},loading:function(t){if(t=t||function(){},this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",e(window).height()<this.$element.height()),this.isLoading)if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass("in");var n=this;e.support.transition?this.$backdropHandle.one(e.support.transition.end,function(){n.removeLoading()}):n.removeLoading()}else t&&t(this.isLoading);else{this.$backdropHandle=this.createBackdrop("fade",this.options.backdropTemplate),this.$backdropHandle[0].offsetWidth;var o=this.getOpenModals();this.$backdropHandle.css("z-index",a("backdrop",o.length+1)).addClass("in");var s=e(this.options.spinner).css("z-index",a("modal",o.length+1)).appendTo(this.$element).addClass("in");this.$spinner=e(this.createContainer()).append(s).on("click.modalmanager",e.proxy(this.loading,this)),this.isLoading=!0,e.support.transition?this.$backdropHandle.one(e.support.transition.end,t):t()}}};var n,o,a=(o={},function(t,a){if(void 0===n){var s=e('<div class="modal hide" />').appendTo("body"),i=e('<div class="modal-backdrop hide" />').appendTo("body");o.modal=+s.css("z-index"),o.backdrop=+i.css("z-index"),n=o.modal-o.backdrop,s.remove(),i.remove(),i=s=null}return o[t]+n*a});function s(e){return function(t){if(t&&this===t.target)return e.apply(this,arguments)}}e.fn.modalmanager=function(n,o){return this.each(function(){var a=e(this),s=a.data("modalmanager");s||a.data("modalmanager",s=new t(this,n)),"string"==typeof n&&s[n].apply(s,[].concat(o))})},e.fn.modalmanager.defaults={backdropLimit:999,resize:!0,spinner:'<div class="loading-spinner fade" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},e.fn.modalmanager.Constructor=t,e(function(){e(document).off("show.bs.modal").off("hidden.bs.modal")})}(jQuery);